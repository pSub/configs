#!/bin/sh

echo -n "Do you want to synchronise changes? [y/n/d] "

while [ 1 ]
do
    read action
    case $action in
        
        # Sync all changes and start depending programs
        "y" )
            HOME=/home/pascal
            # It's important to sync the unison profile
            # files first
            ssh-add && unison unison && unison all
            break
            ;;
        
        # Don't sync and start depending programs
        "n" )
            break
            ;;

        # Only add the ssh key
        "o" )
            ssh-add
            exit 0
            ;;
        
        # Don't sync and don't start programs
        "d" )
            exit 0
            ;;

        * )
            echo -n "Invalid input! Try again: "
            ;;
    esac
done

# Add programms to start after successful synchronisation.
# Most likely programs that depends on data that was synced.
urxvtc -e newsbeuter
urxvtc -e hsgtd

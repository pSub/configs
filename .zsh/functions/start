# -*- mode: shell-script -*-

# Handle the start/stop/restart and reload of daemons uniformly.
local daemonPath distro cmd
if [[ $# -le 0 ]]; then
  echo "Usage: start [restart, stop, reload] DAEMON [DAEMON ...]"
  return 1
fi
distro=$(cat /etc/issue)
case $distro in
        *"Arch Linux"*)
              daemonPath="/etc/rc.d/" ;;
        *"Debian GNU/Linux"*)
              daemonPath="/etc/init.d/" ;;
        *)
              echo "Distro not supported"
              exit 1
esac
if [[ $UID = 0 ]]; then
    foreach daemon ($*); do
      $daemonPath$daemon $0
    done
else
    foreach daemon ($*); do
       cmd="$cmd $daemonPath$daemon $0;"
    done
    su --command="$cmd"
fi
unset daemonPath distro
